<div id="reg" class="page">
    <div class="grid">
        <div class="row">
            <div class="span12">
                <h1><a href="#ctn" onclick="defaultPage();return false"><i class="icon-arrow-left-3 fg-darker smaller"></i></a> Masuk</h1>
                <p>
                    Silahkan masuk untuk dapat mengakses internet dengan duWiFi.
                </p>
                <form id="frm_login" method="post" action="">
                    <div class="row">
                        <div class="span3">
                            <div class="input-control text">
                                <input id="inputEmail" name="email" type="email" placeholder="user@example.com"/>
                            </div>
                        </div>
                        <div class="span3">
                            <div class="input-control password">
                                <input id="inputPassword" name="password" type="password" placeholder="Sandi"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="span3">
                            <div class="input-control button primary">
                                <button class="primary" type="button">Masuk</button>
                            </div>
                        </div>
                    </div>
                </form>
                <p>
                    Tidak memiliki akun duWiFi? <a href="#ctn" onclick="regPage();return false">Daftar sekarang</a>
                </p>
            </div>
        </div>
    </div>
</div>
<script>
    $("#frm_login").validate({
        rules: {
            email: {
                required: true,
                email: true
            },
            password: {
                required: true,
                minlength: 8
            }
        },
        messages: {
            email: {
                required: "Email tidak boleh dibiarkan kosong.",
                email: "Silahkan isi dengan alamat email yang valid."
            },
            password: {
                required: "Kata Sandi tidak boleh dibiarkan kosong.",
                minlength: "Kata Sandi pendek mudah ditebak. Cobalah sandi yang panjangnya minimal 8 karakter."
            }
        }
    });
        
    $('#inputLoginBtn').click(function(){
        if($("#frm_login").valid()!==true){
            $.Dialog({
                shadow: true,
                overlay: true,
                icon: '<span class="icon-user"></span>',
                title: 'Pesan Masuk',
                width: 200,
                padding: 10,
                content: '<p>Silahkan isi email / password dengan benar.</p>'
            });
        } else {
            var response = 'captchaResponse='+$('#g-recaptcha-response').val();
            var dataReg = {
                        first_name : $('#inputFirstName').val(),
                        last_name : $('#inputLastName').val(),
                        email : $('#inputEmail').val(),
                        password : $('#inputPassword').val()
                    };
            $.ajax({
                type: 'POST',
                url: 'app/Captcha.php',
                data: response,
                success: function (data) {
                            //console.log(data);
                            var status = $.parseJSON(data);
                            //alert(status.success);
                            if(status.success==='true'){
                                $.Dialog({
                                        shadow: true,
                                        overlay: true,
                                        icon: '<span class="icon-checkbox"></span>',
                                        title: 'Pendaftaran Berhasil',
                                        width: 200,
                                        padding: 10,
                                        content: '<p>Selamat, akun anda berhasil dibuat.<br/>Silahkan gunakan akun anda di setiap area duWiFi.</p>'
                                    });
                                RegNewMember(dataReg);
                                grecaptcha.reset(RegNoReVerification);
                                document.getElementById("frm_reg").reset();
                            } else {
                                $.Dialog({
                                    shadow: true,
                                    overlay: true,
                                    icon: '<span class="icon-checkbox"></span>',
                                    title: 'Human Verification',
                                    width: 200,
                                    padding: 10,
                                    content: '<p>Mohon lakukan verifikasi terlebih dahulu untuk memastikan bahwa anda bukan spam atau robot.</p>'
                                });
                            }
                        }                    
            });
        }
    });
        
</script>
<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
